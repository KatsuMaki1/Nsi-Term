def recherche(Texte, Motif):
    Ltext = len(Texte)
    Lmotif = len(Motif)
    
    tab_caractere = [-1] * 256
    for i in range(Lmotif):
        tab_caractere[ord(Motif[i])] = i
        
    decalage = 0
    resultat = []
    
    while decalage <= Ltext - Lmotif + 1:
        j = Lmotif - 1  
        
        while j >= 0 and Motif[j] == Texte[decalage + j]:
            j = j- 1
            
        if j < 0:  # motif trouvé
            resultat.append(decalage)  # sauvegarde de la position
            
            if decalage + Lmotif < Ltext:
                decalage = decalage + Lmotif - tab_caractere[ord(Texte[decalage + Lmotif])]
            else:
                decalage += 1
        else:  # motif non trouvé, on décale
            maxi = max(1, j - tab_caractere[ord(Texte[decalage + j])])
            decalage += maxi
            
    return resultat


fichier = open("20000 lieues sous les mers - Jules Verne.txt", "r")
Texte = fichier.read() 
Motif = "Poisson"
positions = recherche(Texte, Motif)
print("Le motif a été trouvé aux positions :", positions)
fichier.close()
